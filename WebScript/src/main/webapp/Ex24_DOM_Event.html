<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Insert title here</title>
    <style type="text/css">
      table {
        width: 100%;
      }
      table,
      tr,
      th,
      td {
        border: 1px solid;
        border-collapse: collapse;
      }
      td {
        background-color: gold;
        text-align: center;
      }
    </style>
    <script type="text/javascript"></script>
  </head>
  <body>
    <div id="div">
      행의수 : <input type="text" id="txtrow" name="txtrow" value="3" /><br />
      열의수 :
      <input type="text" id="txtcolumn" name="txtcolumn" value="4" /><br />
      <input type="button" id="b1" value="동적테이블 생성" />
      <input type="button" id="b2" value="동적테이블 제거" />
    </div>

    <script>
      // 동적으로 테이블 생성하기
      // 동적으로 생성된 테이블 하나씩 제거하기

      document.getElementById("b1").onclick = function () {
        let table = document.createElement("table");
        table.setAttribute("id", "table");
        let col = document.getElementById("txtrow").value;
        let row = document.getElementById("txtcolumn").value;

        // let str = "";

        for (let i = 0; i < col; i++) {
          // str += "<tr>";
          let tr = document.createElement("tr");
          for (let j = 0; j < row; j++) {
            // str += "<td>(" + i + ", " + j + ")</td>";
            if (i == 0) {
              //첫행 ...<tr><th></th><th></th></tr>
              let td = document.createElement("th");
              let text = document.createTextNode(
                i + 1 + "행" + "," + (j + 1) + "열"
              );
              td.appendChild(text);
              tr.appendChild(td);
              //<tr><th>1행1열</th></tr>
            } else {
              //두번째행 ...<tr><td></td><td></td></tr>
              let td = document.createElement("td");
              let text = document.createTextNode(
                i + 1 + "행" + "," + (j + 1) + "열"
              );
              td.appendChild(text); // 추가
              tr.appendChild(td); // row 에 추가
            }
          }
          // str += "</tr>";
          table.appendChild(tr); //Table tr add
        }
        document.getElementById("div").appendChild(table);
      };

      document.getElementById("b2").onclick = function () {
        // 모두 삭제..
        // document.getElementById("table").remove();

        /*
        // 1. id 삭제하기
        // 원칙 : id = "tab" 페이지에 1개만 존재(id 식별자 한개)
        let tab = document.getElementById("Tab");
        // 제일 처음 만나는 id = Tab 요소를 가지고 온다
        // console.log(tab);
        // document.getElementById("div").removeChild(tab);
         */

        // 2. Table id 속성이 없을 때
        let tables = document.getElementsByTagName("table"); // return 배열
        console.log(tables);
        console.log(tables.length);
        console.log(tables[tables.length - 1]);

        // table 배열의 마지막 요소부터 지우면 될듯!
        if (tables.length > 0) {
          document.getElementById("div").removeChild(tables[tables.length - 1]);
        } else {
          alert("테이블이 없습니다");
        }
      };
    </script>
  </body>
</html>
